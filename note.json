{"paragraphs":[{"title":"Script to create Hbase Table","text":"%sh\n\necho 'create \"customer_info\", \"profile\"' > /tmp/create_hbase_table.txt\n\necho \"put 'customer_info','1','profile:name','frank'\" >> /tmp/create_hbase_table.txt\necho \"put 'customer_info','1','profile:location','north carolina'\" >> /tmp/create_hbase_table.txt\necho \"put 'customer_info','1','profile:balance','100,000'\" >> /tmp/create_hbase_table.txt\n\necho \"put 'customer_info','2','profile:name','dean'\" >> /tmp/create_hbase_table.txt\necho \"put 'customer_info','2','profile:location','new york'\" >> /tmp/create_hbase_table.txt\necho \"put 'customer_info','2','profile:balance','90,000'\" >> /tmp/create_hbase_table.txt\n\necho \"put 'customer_info','3','profile:name','sammy'\" >> /tmp/create_hbase_table.txt\necho \"put 'customer_info','3','profile:location','nevada'\" >> /tmp/create_hbase_table.txt\necho \"put 'customer_info','3','profile:balance','75,000'\" >> /tmp/create_hbase_table.txt\n\ncat /tmp/create_hbase_table.txt","dateUpdated":"Aug 10, 2016 8:36:55 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470851256288_-1794131859","id":"20160810-174736_1493323298","result":{"code":"SUCCESS","type":"TEXT","msg":"create \"customer_info\", \"profile\"\nput 'customer_info','1','profile:name','frank'\nput 'customer_info','1','profile:location','north carolina'\nput 'customer_info','1','profile:balance','100,000'\nput 'customer_info','2','profile:name','dean'\nput 'customer_info','2','profile:location','new york'\nput 'customer_info','2','profile:balance','90,000'\nput 'customer_info','3','profile:name','sammy'\nput 'customer_info','3','profile:location','nevada'\nput 'customer_info','3','profile:balance','75,000'\n"},"dateCreated":"Aug 10, 2016 5:47:36 PM","dateStarted":"Aug 10, 2016 8:36:55 PM","dateFinished":"Aug 10, 2016 8:36:56 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:238","focus":true},{"title":"Create Hbase Table (via hbase shell)","text":"%sh\n\ncat /tmp/create_hbase_table.txt | hbase shell","dateUpdated":"Aug 10, 2016 8:37:04 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470851476591_159728680","id":"20160810-175116_1765215801","result":{"code":"SUCCESS","type":"TEXT","msg":"SLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/hdp/2.4.0.0-169/hadoop/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/hdp/2.4.0.0-169/zookeeper/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]\nHBase Shell; enter 'help<RETURN>' for list of supported commands.\nType \"exit<RETURN>\" to leave the HBase Shell\nVersion 1.1.2.2.4.0.0-169, r61dfb2b344f424a11f93b3f086eab815c1eb0b6a, Wed Feb 10 07:08:51 UTC 2016\n\ncreate \"customer_info\", \"profile\"\n0 row(s) in 1.5440 seconds\n\nHbase::Table - customer_info\nput 'customer_info','1','profile:name','frank'\n0 row(s) in 0.1830 seconds\n\nput 'customer_info','1','profile:location','north carolina'\n0 row(s) in 0.0060 seconds\n\nput 'customer_info','1','profile:balance','100,000'\n0 row(s) in 0.0100 seconds\n\nput 'customer_info','2','profile:name','dean'\n0 row(s) in 0.0060 seconds\n\nput 'customer_info','2','profile:location','new york'\n0 row(s) in 0.0060 seconds\n\nput 'customer_info','2','profile:balance','90,000'\n0 row(s) in 0.0060 seconds\n\nput 'customer_info','3','profile:name','sammy'\n0 row(s) in 0.0040 seconds\n\nput 'customer_info','3','profile:location','nevada'\n0 row(s) in 0.0060 seconds\n\nput 'customer_info','3','profile:balance','75,000'\n0 row(s) in 0.0060 seconds\n\n"},"dateCreated":"Aug 10, 2016 5:51:16 PM","dateStarted":"Aug 10, 2016 8:37:04 PM","dateFinished":"Aug 10, 2016 8:37:14 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:239","focus":true},{"title":"Check Hbase table (to verify the records were created)","text":"%sh\n\necho \"get 'customer_info','2'\" | hbase shell","dateUpdated":"Aug 10, 2016 8:38:28 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470851586164_1894346932","id":"20160810-175306_1749056972","result":{"code":"SUCCESS","type":"TEXT","msg":"SLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/hdp/2.4.0.0-169/hadoop/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/hdp/2.4.0.0-169/zookeeper/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]\nHBase Shell; enter 'help<RETURN>' for list of supported commands.\nType \"exit<RETURN>\" to leave the HBase Shell\nVersion 1.1.2.2.4.0.0-169, r61dfb2b344f424a11f93b3f086eab815c1eb0b6a, Wed Feb 10 07:08:51 UTC 2016\n\nget 'customer_info','2'\nCOLUMN  CELL\n profile:balance timestamp=1470861434215, value=90,000\n profile:location timestamp=1470861434193, value=new york\n profile:name timestamp=1470861434155, value=dean\n3 row(s) in 0.2760 seconds\n\n"},"dateCreated":"Aug 10, 2016 5:53:06 PM","dateStarted":"Aug 10, 2016 8:37:45 PM","dateFinished":"Aug 10, 2016 8:37:53 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:240","focus":true},{"title":"Take Hbase Snapshot","text":"%sh\n\necho \"snapshot 'customer_info', 'customer_info_ss'\" | hbase shell\n","dateUpdated":"Aug 10, 2016 8:40:49 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"title":true,"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470855170408_1374254478","id":"20160810-185250_333186429","result":{"code":"SUCCESS","type":"TEXT","msg":"SLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/hdp/2.4.0.0-169/hadoop/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/hdp/2.4.0.0-169/zookeeper/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]\nHBase Shell; enter 'help<RETURN>' for list of supported commands.\nType \"exit<RETURN>\" to leave the HBase Shell\nVersion 1.1.2.2.4.0.0-169, r61dfb2b344f424a11f93b3f086eab815c1eb0b6a, Wed Feb 10 07:08:51 UTC 2016\n\nsnapshot 'customer_info', 'customer_info_ss'\n0 row(s) in 0.5430 seconds\n\n"},"dateCreated":"Aug 10, 2016 6:52:50 PM","dateStarted":"Aug 10, 2016 8:40:49 PM","dateFinished":"Aug 10, 2016 8:40:57 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:241","focus":true},{"title":"Create a temporary directory - This is the location where the Snapshot will be temporarily restored","text":"%sh\n\nsudo -u hdfs hdfs dfs -mkdir /tmp/hbase_snapshots\n","dateUpdated":"Aug 10, 2016 6:59:04 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470855487110_1150772851","id":"20160810-185807_1403502991","dateCreated":"Aug 10, 2016 6:58:07 PM","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:242"},{"title":"Create Hive Table (used the Hive shell to run this)","text":"%hive\n\nCREATE TABLE if not exists hive_hbase_ss (key string, name string, location string, balance string, time timestamp) \nSTORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'\nWITH SERDEPROPERTIES (\"hbase.columns.mapping\" = \":key,profile:name,profile:location,profile:balance,:timestamp\")\nTBLPROPERTIES (\"hive.hbase.snapshot.name\"=\"customer_info_ss\");","dateUpdated":"Aug 10, 2016 8:41:29 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"title":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470855336809_22694533","id":"20160810-185536_1494947727","result":{"code":"SUCCESS","type":"TEXT","msg":""},"dateCreated":"Aug 10, 2016 6:55:36 PM","dateStarted":"Aug 10, 2016 6:59:47 PM","dateFinished":"Aug 10, 2016 6:59:47 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:243"},{"title":"Query the Database Snapshot in Hive with Record-Level Timestamp (used the Hive shell to run this)","text":"%hive\n\nset hive.hbase.snapshot.name=customer_info_ss;\nset hive.hbase.snapshot.restoredir=/tmp/hbase_snapshots;\nselect * from hive_hbase_ss where time >= '2016-08-10 18:51:32.200';\n\n\n--Results:\n--OK\n--2\t dean\tnew york\t90,000\t2016-08-10 20:37:14.215\n--3\t sammy\tnevada\t75,000\t2016-08-10 20:37:14.255\n--Time taken: 2.949 seconds, Fetched: 3 row(s)\n","dateUpdated":"Aug 10, 2016 9:20:00 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470855549181_363869405","id":"20160810-185909_743714145","result":"org.apache.thrift.transport.TTransportException","dateCreated":"Aug 10, 2016 6:59:09 PM","dateStarted":"Aug 10, 2016 8:10:59 PM","dateFinished":"Aug 10, 2016 8:17:04 PM","status":"FINISHED","errorMessage":"org.apache.thrift.transport.TTransportException\n\tat org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:132)\n\tat org.apache.thrift.transport.TTransport.readAll(TTransport.java:86)\n\tat org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:429)\n\tat org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:318)\n\tat org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:219)\n\tat org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:69)\n\tat org.apache.zeppelin.interpreter.thrift.RemoteInterpreterService$Client.recv_interpret(RemoteInterpreterService.java:220)\n\tat org.apache.zeppelin.interpreter.thrift.RemoteInterpreterService$Client.interpret(RemoteInterpreterService.java:205)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreter.interpret(RemoteInterpreter.java:213)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:93)\n\tat org.apache.zeppelin.notebook.Paragraph.jobRun(Paragraph.java:212)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:171)\n\tat org.apache.zeppelin.scheduler.RemoteScheduler$JobRunner.run(RemoteScheduler.java:326)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\tat java.lang.Thread.run(Thread.java:745)\n","progressUpdateIntervalMs":500,"$$hashKey":"object:244"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470859767329_-112149075","id":"20160810-200927_2103203733","dateCreated":"Aug 10, 2016 8:09:27 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:245","text":"%md\n<h5>Dan Zaratsian - Aug 2016</h5>","dateUpdated":"Aug 10, 2016 8:30:59 PM","dateFinished":"Aug 10, 2016 8:30:57 PM","dateStarted":"Aug 10, 2016 8:30:56 PM","result":{"code":"SUCCESS","type":"HTML","msg":"<h5>Dan Zaratsian - Aug 2016</h5>\n"},"focus":true},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470861056550_1513056518","id":"20160810-203056_2057936966","dateCreated":"Aug 10, 2016 8:30:56 PM","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:392"}],"name":"Hbase_with_Hive","id":"2BS4836GW","angularObjects":{"2BQ9Y66FH":[],"2BRP5663K":[],"2BTGEXB4E":[],"2BSQWXCH6":[],"2BTMKA19Z":[],"2BTR1A48W":[],"2BQJ6U96F":[],"2BSPSGWCB":[],"2BS87HHBV":[],"2BSQWMA8N":[],"2BRF6H8MG":[],"2BS2FND5T":[],"2BT4F2H1E":[]},"config":{"looknfeel":"default"},"info":{}}